import os
import bait.util.testing

const ROOT_DIRS := [
	'hello_world',
	'loops'
]

const DIRS := [
	'100_doors',
]

const C_SKIPS := []string

fun run_task_tests(opts string, skips []string) {
	mut runner := testing.InOutRunner{
		check_stdout = true
		cmd_options = opts
		skips = skips
	}

	tasks := os.dir($FILE)

	for rd in ROOT_DIRS {
		runner.root = os.join_path(tasks, [rd])
		runner.test_all_in_root()
	}
	runner.root = tasks
	for d in DIRS {
		runner.test_dir(d)
	}
}

fun test_tasks_js() {
	run_task_tests('-b js', []string)
}

fun test_tasks_c() {
	run_task_tests('-b c', C_SKIPS)
}
